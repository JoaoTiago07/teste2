<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-99715444-7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-99715444-7');
    </script>

    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
    <link href='style.css' rel='stylesheet' type='text/css'>
    <title>Resultados</title>
    <link rel="icon" type="x-icon" href="icon.png">
    <link rel="shortcut icon" type="x-icon" href="icon.png">
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    
    <body>
    <h1 class="title">Teste Político - Votar Claro</h1>
    <svg id="svgHeader" style="width: 100%;" viewBox="0 0 112 19">
        <text x="50%" y="15" class="svgHeader">Teste Político - Votar Claro</text>
    </svg>
    <hr>
    
	<h1 class="title">Resultados</h1></br>
    <svg id="svgHeader" style="width: 100%;" viewBox="0 0 112 19">
		<text x="50%" y="15" class="svgHeader">Resultados</text>
	</svg>
    
    <img src="" id="banner"></canvas></br>
    <p style="text-align:center;margin:-2px auto">Dica: Se quiseres, podes descarregar a imagem diretamente. Não precisas de fazer captura de ecrã!</p></br>
    <p style="text-align:center;margin:-2px auto">A tua posição no espectro ficou marcada pelo ponto vermelho. Se não sabes ou queres saber mais sobre a força política mais próxima à tua posição...</p></br>	    
    <button class="button" onclick="location.href='index.html';" style="background-color: #2196f3;">Voltar</button> <br>
	
    
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        x_axis  = parseFloat(urlParams.get("right"))
        y_axis  = parseFloat(urlParams.get("auth"))
        z_axis  = parseFloat(urlParams.get("prog"))
    
        window.onload = function() {
            var background = new Image();
            background.onload = function() {
                var c = document.createElement("canvas");
                c.width = 1850;
                c.height = 1600;
                var ctx = c.getContext("2d");
                ctx.fillStyle = "#EEEEEE"
                ctx.fillRect(0, 0, 1850, 1600);
                ctx.drawImage(background, 0, 0);
    
                var dot = c.getContext("2d");
                dot.beginPath();
                dot.arc(200 + (1000 * (x_axis+10)/20), 1150 - (1000 * (y_axis + 10)/20), 25, 0, 2 * Math.PI);
                dot.fillStyle = 'red';
                dot.fill();
                dot.stroke();
    
                var line = c.getContext("2d");
                line.beginPath();
                line.moveTo(1500, 1145 - (1000 * (z_axis + 10)/20));
                line.lineTo(1650, 1145 - (1000 * (z_axis + 10)/20));
                line.lineWidth = 10;
                line.strokeStyle = "red";
                line.stroke();
    
                ctx.font="50px Montserrat"
                ctx.textAlign="center"
                ctx.fillStyle="#222222"
                ctx.fillText("Eixo da Esquerda / Direita (x): " + x_axis, 725, 1375)
                ctx.fillText("Eixo de Autoritário / Liberal (y): " + y_axis, 725, 1450)
                ctx.fillText("Eixo de Progressista / Conservador (z): " + z_axis, 725, 1525)
                ctx.textAlign="right"
                ctx.font="60px Montserrat"
                ctx.fillText("Votar Claro", 1820, 1560)
    
                document.getElementById("banner").src = c.toDataURL();
            }
            background.src = "./compass.png";
        }
        </script>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    x_axis = parseFloat(urlParams.get("right"));
    y_axis = parseFloat(urlParams.get("auth"));
    z_axis = parseFloat(urlParams.get("prog"));

    // Coordenadas do usuário
    const coordenadas_usuario = { x: x_axis, y: y_axis, z: z_axis };

    // Informações sobre os partidos
    const partidos = {
        'PartidoA': { x: valor_x_partidoA, y: valor_y_partidoA, z: valor_z_partidoA },
        'PartidoB': { x: valor_x_partidoB, y: valor_y_partidoB, z: valor_z_partidoB },
        // Adicione outros partidos conforme necessário
    };

    // Função para calcular a distância euclidiana
    function calcularDistancia(coord_usuario, coord_partido) {
        return Math.sqrt(
            Math.pow(coord_usuario.x - coord_partido.x, 2) +
            Math.pow(coord_usuario.y - coord_partido.y, 2) +
            Math.pow(coord_usuario.z - coord_partido.z, 2)
        );
    }

    // Encontrar o partido mais próximo
    let distancia_minima = Infinity;
    let partido_mais_proximo = null;

    for (const [nome_partido, coord_partido] of Object.entries(partidos)) {
        const distancia = calcularDistancia(coordenadas_usuario, coord_partido);
        if (distancia < distancia_minima) {
            distancia_minima = distancia;
            partido_mais_proximo = nome_partido;
        }
    }

    // Exibir o partido mais próximo
    const resultadoPartido = document.createElement('p');
    resultadoPartido.style.textAlign = 'center';
    resultadoPartido.innerHTML = `O partido mais próximo é: ${partido_mais_proximo}`;
    document.body.appendChild(resultadoPartido);

    // Se você quiser redirecionar para uma página específica do partido, pode adicionar um botão ou um link aqui.
    const linkPartido = document.createElement('a');
    linkPartido.href = `pagina-do-${partido_mais_proximo}.html`;
    linkPartido.innerText = `Saiba mais sobre o ${partido_mais_proximo}`;
    linkPartido.style.display = 'block';
    linkPartido.style.textAlign = 'center';
    document.body.appendChild(linkPartido);
</script>

<!-- ... (seu código existente) ... -->

    </body>
    
